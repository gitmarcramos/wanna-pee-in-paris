import{j as f,r as l,v as N,R as x,a as y}from"./vendor.e36e2ff8.js";const E=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};E();const e=f.exports.jsx,t=f.exports.jsxs,h=f.exports.Fragment;function A(i){return e("div",{children:e("span",{className:"error-message",children:i.msg})})}function k(i){const[s,n]=l.exports.useState(""),d=v=>{n(v.currentTarget.value)},[r,a]=l.exports.useState(null),o=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020"],u=()=>{o.includes(s)&&(a(s),n(""))},[m,c]=l.exports.useState({latitude:null,longitude:null});return l.exports.useEffect(()=>{i.getArr(r),i.getGeolocate(m)},[r,m]),t("div",{className:"main-search container",children:[e("h1",{className:"body",children:"Dans quel arrondissement cherchez-vous ?"}),t("div",{className:"search-options",children:[t("div",{className:"search-bar",children:[e("input",{type:"text",className:"search-input",onInput:d,value:s}),e("button",{className:"button button--search",onClick:u,children:"Go !"})]}),(s.length>5||isNaN(s)||s.length===5&&!o.includes(s))&&e(A,{msg:"Veuillez entrer un arrondissement de Paris entre 75001 et 75020"})]})]})}var w="/assets/Close.9d59c4e7.svg";var p="/assets/clock.64606870.svg",g="/assets/wheel.3d4ab1d9.svg",b="/assets/baby.9224b752.svg";function R(i){const s=i.data;return t("div",{className:"item-result",children:[e("h4",{className:"title",children:s.fields.adresse}),t("div",{className:"item-result-infos",children:[s.fields.horaire==="Voir fiche \xE9quipement"?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("a",{href:s.fields.url_fiche_equipement,className:"body-min",target:"_blank",children:"Consulter"})]}):e(h,{children:s.fields.horaire?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("h5",{className:"body-min",children:s.fields.horaire})]}):t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires",className:"disabled"}),e("h5",{className:"body-min",children:"Non sp\xE9cifi\xE9"})]})}),s.fields.acces_pmr==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:g,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:g,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}),s.fields.relais_bebe&&s.fields.relais_bebe==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:b,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:b,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]})]})]})}function S(){const[i,s]=l.exports.useState(!0);return l.exports.useEffect(()=>{const n=setTimeout(()=>{s(!1)},800);return()=>{clearTimeout(n)}},[]),e(h,{children:i?t("div",{className:"loader",children:[e("h1",{className:"body white",children:"Recherche en cours"}),t("svg",{width:"58",height:"58",viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{id:"loader-out",cx:"29",cy:"29",r:"28",stroke:"white",strokeWidth:"2",strokeDasharray:"170"}),e("circle",{id:"loader-middle",cx:"29",cy:"29",r:"21",stroke:"white",strokeWidth:"2",strokeDasharray:"150"}),e("circle",{id:"loader-in",cx:"29",cy:"29",r:"13",stroke:"white",strokeWidth:"2",strokeDasharray:"50"})]})]}):e(h,{})})}function I(i){const[s,n]=l.exports.useState([]);l.exports.useState({longitude:"",latitude:""});//! Here trying to manage the geolocation, but not working with only the button because it needs to have a REAL arrondissement to avoid empty array in results
l.exports.useState("");const[d,r]=l.exports.useState(""),a=c=>{c.currentTarget.checked?r("&refine.acces_pmr=Oui"):r("")},[o,u]=l.exports.useState(""),m=c=>{c.currentTarget.checked?u("&refine.relais_bebe=Oui"):u("")};return console.log(s),l.exports.useEffect(async()=>{try{const c=await(await fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=sanisettesparis&q=&rows=100&q=&facet=type&facet=statut&facet=arrondissement&facet=horaire&facet=acces_pmr&facet=relais_bebe&refine.arrondissement="+i.data+d+o+"")).json();n(c.records)}catch(c){console.error(c)}},[d,o]),t(h,{children:[e(S,{}),t("div",{className:"search-results container",children:[t("div",{className:"search-results__data",children:[e("img",{src:w,alt:"Close button",className:"close-svg",onClick:i.reset}),t("div",{className:"search-results__data--main",children:[t("h1",{className:"title",children:["Toilettes publiques dans le ",i.data]}),t("h2",{children:[s.length," r\xE9sultats"]})]}),t("div",{className:"search-results__data--filter",children:[e("h3",{className:"sub",children:"Filtrer"}),t("div",{className:"filter-input",children:[t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"acces-pmr",className:"body-min",children:"Acc\xE8s PMR"}),e("input",{type:"checkbox",id:"acces-pmr",onChange:a})]}),t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"relais-bebe",className:"body-min",children:"Relais b\xE9b\xE9"}),e("input",{type:"checkbox",id:"relais-bebe",onChange:m})]})]})]}),e("button",{className:"button-link",onClick:i.reset,children:"Nouvelle recherche"})]}),s.length===0?e(h,{children:e("div",{className:"toilet",children:e("span",{className:"body",children:"Pas de toilettes disponibles. Veuillez modifiez les filtres."})})}):e("div",{className:"toilet",children:s.map(c=>e(R,{data:c},N()))})]})]})}var _="/assets/logo.04355717.svg",P="/assets/Illustration.ae8743b6.svg";function M(){const[i,s]=l.exports.useState(window.innerWidth);l.exports.useEffect(()=>{console.log(i)},[i]);const[n,d]=l.exports.useState(null),r=c=>{d(c)},a=()=>{d(null),u({latitude:null,longitude:null})},[o,u]=l.exports.useState({latitude:null,longitude:null});return t("div",{className:"App",children:[e("img",{src:_,className:"logo",alt:"Wanna Pee in Paris Logo",onClick:a}),e("img",{src:P,className:"illustration",alt:"Home page illustration"}),n===null&&e(k,{getArr:r,getGeolocate:c=>{u(c)}}),(o.latitude||n)&&e(I,{data:n,reset:a,geoData:o})]})}x.render(e(y.StrictMode,{children:e(M,{})}),document.getElementById("root"));
