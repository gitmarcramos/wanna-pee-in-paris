import{j as f,r as l,v as N,R as x,a as y}from"./vendor.e36e2ff8.js";const E=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};E();const e=f.exports.jsx,t=f.exports.jsxs,m=f.exports.Fragment;function k(a){return e("div",{children:e("span",{className:"error-message",children:a.msg})})}function A(a){const[s,o]=l.exports.useState(""),d=v=>{o(v.currentTarget.value)},[r,i]=l.exports.useState(null),n=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020"],u=()=>{n.includes(s)&&(i(s),o(""))},[h,c]=l.exports.useState({latitude:null,longitude:null});return l.exports.useEffect(()=>{a.getArr(r),a.getGeolocate(h)},[r,h]),t("div",{className:"main-search container",children:[e("h1",{className:"body",children:"Dans quel arrondissement cherchez-vous ?"}),t("div",{className:"search-options",children:[t("div",{className:"search-bar",children:[e("input",{type:"number",className:"search-input",onInput:d,value:s}),e("button",{className:"button button--search",onClick:u,children:"Go !"})]}),(s.length>5||isNaN(s)||s.length===5&&!n.includes(s))&&e(k,{msg:"Veuillez entrer un arrondissement de Paris entre 75001 et 75020"})]})]})}var w="/assets/Close.9d59c4e7.svg";var p="/assets/clock.64606870.svg",b="/assets/wheel.3d4ab1d9.svg",g="/assets/baby.9224b752.svg";function I(a){const s=a.data;return t("div",{className:"item-result",children:[e("h4",{className:"title",children:s.fields.adresse}),t("div",{className:"item-result-infos",children:[s.fields.horaire==="Voir fiche \xE9quipement"?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("a",{href:s.fields.url_fiche_equipement,className:"body-min",target:"_blank",children:"Consulter"})]}):e(m,{children:s.fields.horaire?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("h5",{className:"body-min",children:s.fields.horaire})]}):t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires",className:"disabled"}),e("h5",{className:"body-min",children:"Non sp\xE9cifi\xE9"})]})}),s.fields.acces_pmr==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:b,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:b,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}),s.fields.relais_bebe&&s.fields.relais_bebe==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:g,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:g,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]})]})]})}function R(){const[a,s]=l.exports.useState(!0);return l.exports.useEffect(()=>{const o=setTimeout(()=>{s(!1)},800);return()=>{clearTimeout(o)}},[]),e(m,{children:a?t("div",{className:"loader",children:[e("h1",{className:"body white",children:"Recherche en cours"}),t("svg",{width:"58",height:"58",viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{id:"loader-out",cx:"29",cy:"29",r:"28",stroke:"white",strokeWidth:"2",strokeDasharray:"170"}),e("circle",{id:"loader-middle",cx:"29",cy:"29",r:"21",stroke:"white",strokeWidth:"2",strokeDasharray:"150"}),e("circle",{id:"loader-in",cx:"29",cy:"29",r:"13",stroke:"white",strokeWidth:"2",strokeDasharray:"50"})]})]}):e(m,{})})}function S(a){const[s,o]=l.exports.useState([]);l.exports.useState({longitude:"",latitude:""});//! Here trying to manage the geolocation, but not working with only the button because it needs to have a REAL arrondissement to avoid empty array in results
l.exports.useState("");const[d,r]=l.exports.useState(""),i=c=>{c.currentTarget.checked?r("&refine.acces_pmr=Oui"):r("")},[n,u]=l.exports.useState(""),h=c=>{c.currentTarget.checked?u("&refine.relais_bebe=Oui"):u("")};return console.log(s),l.exports.useEffect(async()=>{try{const c=await(await fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=sanisettesparis&q=&rows=100&q=&facet=type&facet=statut&facet=arrondissement&facet=horaire&facet=acces_pmr&facet=relais_bebe&refine.arrondissement="+a.data+d+n+"")).json();o(c.records)}catch(c){console.error(c)}},[d,n]),t(m,{children:[e(R,{}),t("div",{className:"search-results container",children:[t("div",{className:"search-results__data",children:[e("img",{src:w,alt:"Close button",className:"close-svg",onClick:a.reset}),t("div",{className:"search-results__data--main",children:[t("h1",{className:"title",children:["Toilettes publiques dans le ",a.data]}),t("h2",{children:[s.length," r\xE9sultats"]})]}),t("div",{className:"search-results__data--filter",children:[e("h3",{className:"sub",children:"Filtrer"}),t("div",{className:"filter-input",children:[t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"acces-pmr",className:"body-min",children:"Acc\xE8s PMR"}),e("input",{type:"checkbox",id:"acces-pmr",onChange:i})]}),t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"relais-bebe",className:"body-min",children:"Relais b\xE9b\xE9"}),e("input",{type:"checkbox",id:"relais-bebe",onChange:h})]})]})]}),e("button",{className:"button-link",onClick:a.reset,children:"Nouvelle recherche"})]}),s.length===0?e(m,{children:e("div",{className:"toilet",children:e("span",{className:"body",children:"Il n'y a pas de toilettes disponible avec ces crit\xE8re. Veuillez modifier votre recherche."})})}):e("div",{className:"toilet",children:s.map(c=>e(I,{data:c},N()))})]})]})}var _="/assets/logo.461c5b3a.svg",P="/assets/Illustration.ae8743b6.svg";function M(){const[a,s]=l.exports.useState(null),o=c=>{s(c)},d=()=>{s(null),i({latitude:null,longitude:null})},[r,i]=l.exports.useState({latitude:null,longitude:null}),n=c=>{i(c)},[u,h]=l.exports.useState(window.innerWidth);return e(m,{children:u>500?e("div",{className:"mobile-check",children:e("h1",{className:"body",children:"Ce site Internet est accessible uniquement sur mobile"})}):t("div",{className:"App",children:[e("img",{src:_,className:"logo",alt:"Wanna Pee in Paris Logo",onClick:d}),e("img",{src:P,className:"illustration",alt:"Home page illustration"}),a===null&&e(A,{getArr:o,getGeolocate:n}),(r.latitude||a)&&e(S,{data:a,reset:d,geoData:r})]})})}x.render(e(y.StrictMode,{children:e(M,{})}),document.getElementById("root"));
