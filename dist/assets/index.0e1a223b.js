import{j as f,r as c,v as E,R as k,a as A}from"./vendor.e36e2ff8.js";const S=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};S();const e=f.exports.jsx,t=f.exports.jsxs,h=f.exports.Fragment;function w(i){return e("span",{className:"error-message body-min",children:i.msg})}function R(i){const[s,o]=c.exports.useState(""),n=y=>{o(y.currentTarget.value)},[r,a]=c.exports.useState(null),d=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020"],u=()=>{d.includes(s)&&(a(s),o(""))},[m,l]=c.exports.useState({latitude:null,longitude:null});c.exports.useEffect(()=>{i.getArr(r),i.getGeolocate(m)},[r,m]);const[v,N]=c.exports.useState(!1),x=()=>{(isNaN(s)||s.length!==5||!d.includes(s))&&N(!0)};return t("div",{className:"main-search container",children:[e("h1",{className:"body",children:"Dans quel arrondissement de Paris cherchez-vous des toilettes publiques?"}),t("div",{className:"search-options",children:[t("div",{className:"search-bar",children:[e("input",{type:"text",pattern:"[0-9]*",className:"search-input",onInput:n,value:s}),e("button",{className:"button button--search",onClick:()=>{u(),x(),o("")},children:"Go !"})]}),v&&e(w,{msg:"Veuillez entrer un arrondissement de Paris entre 75001 et 75020"})]})]})}var I="/assets/Close.9d59c4e7.svg";var p="/assets/clock.64606870.svg",b="/assets/wheel.3d4ab1d9.svg",g="/assets/baby.9224b752.svg";function _(i){const s=i.data;return t("div",{className:"item-result",children:[e("h4",{className:"title",children:s.fields.adresse}),t("div",{className:"item-result-infos",children:[s.fields.horaire==="Voir fiche \xE9quipement"?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("a",{href:s.fields.url_fiche_equipement,className:"body-min",target:"_blank",children:"Consulter"})]}):e(h,{children:s.fields.horaire?t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires"}),e("h5",{className:"body-min",children:s.fields.horaire})]}):t("div",{className:"item-result-infos--item",children:[e("img",{src:p,alt:"Icone des horaires",className:"disabled"}),e("h5",{className:"body-min",children:"Non sp\xE9cifi\xE9"})]})}),s.fields.acces_pmr==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:b,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:b,alt:"Icon d'acc\xE8s PMR"}),e("h5",{className:"body-min",children:"Acc\xE8s PMR"})]}),s.fields.relais_bebe&&s.fields.relais_bebe==="Oui"?t("div",{className:"item-result-infos--item",children:[e("img",{src:g,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]}):t("div",{className:"item-result-infos--item disabled",children:[e("img",{src:g,alt:"Icon de relais b\xE9b\xE9"}),e("h5",{className:"body-min",children:"Relais b\xE9b\xE9"})]})]})]})}function P(i){const[s,o]=c.exports.useState(!0);return c.exports.useEffect(()=>{const n=setTimeout(()=>{o(!1)},800);return()=>{clearTimeout(n)}},[]),e(h,{children:s&&t("div",{className:"loader",children:[e("h1",{className:"body white",children:"Recherche en cours"}),t("svg",{width:"58",height:"58",viewBox:"0 0 58 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{id:"loader-out",cx:"29",cy:"29",r:"28",stroke:"white",strokeWidth:"2",strokeDasharray:"170"}),e("circle",{id:"loader-middle",cx:"29",cy:"29",r:"21",stroke:"white",strokeWidth:"2",strokeDasharray:"150"}),e("circle",{id:"loader-in",cx:"29",cy:"29",r:"13",stroke:"white",strokeWidth:"2",strokeDasharray:"50"})]})]})})}function M(i){const[s,o]=c.exports.useState([]);c.exports.useState({longitude:"",latitude:""});//! Here trying to manage the geolocation, but not working with only the button because it needs to have a REAL arrondissement to avoid empty array in results
c.exports.useState("");const[n,r]=c.exports.useState(""),a=l=>{l.currentTarget.checked?r("&refine.acces_pmr=Oui"):r("")},[d,u]=c.exports.useState(""),m=l=>{l.currentTarget.checked?u("&refine.relais_bebe=Oui"):u("")};return c.exports.useEffect(async()=>{try{const l=await(await fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=sanisettesparis&q=&rows=100&q=&facet=type&facet=statut&facet=arrondissement&facet=horaire&facet=acces_pmr&facet=relais_bebe&refine.arrondissement="+i.data+n+d+"")).json();o(l.records)}catch(l){console.error(l)}},[n,d]),t(h,{children:[e(P,{}),t("div",{className:"search-results container",children:[t("div",{className:"search-results__data",children:[e("img",{src:I,alt:"Close button",className:"close-svg",onClick:i.reset}),t("div",{className:"search-results__data--main",children:[t("h1",{className:"title",children:["Toilettes publiques dans le ",i.data]}),t("h2",{children:[s.length," r\xE9sultats"]})]}),t("div",{className:"search-results__data--filter",children:[e("h3",{className:"sub",children:"Filtrer"}),t("div",{className:"filter-input",children:[t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"acces-pmr",className:"body-min",children:"Acc\xE8s PMR"}),e("input",{type:"checkbox",id:"acces-pmr",onChange:a})]}),t("div",{className:"filter-input--item",children:[e("label",{htmlFor:"relais-bebe",className:"body-min",children:"Relais b\xE9b\xE9"}),e("input",{type:"checkbox",id:"relais-bebe",onChange:m})]})]})]}),e("button",{className:"button-link body",onClick:i.reset,children:"Nouvelle recherche"})]}),s.length===0?e("p",{className:"body",children:"Aucun r\xE9sultat"}):e("div",{className:"toilet",children:s.map(l=>e(_,{data:l},E()))})]})]})}var C="/assets/logo.461c5b3a.svg",L="/assets/Illustration.f3763dec.svg";function q(){const[i,s]=c.exports.useState(null),o=l=>{s(l)},n=()=>{s(null),a({latitude:null,longitude:null})},[r,a]=c.exports.useState({latitude:null,longitude:null}),d=l=>{a(l)},[u,m]=c.exports.useState(window.innerWidth);return e(h,{children:u>500?e("div",{className:"mobile-check",children:e("h1",{className:"body",children:"Ce site Internet est accessible uniquement sur mobile"})}):t("div",{className:"App",children:[e("img",{src:C,className:"logo",alt:"Wanna Pee in Paris Logo",onClick:n}),e("img",{src:L,className:"illustration",alt:"Home page illustration"}),i===null&&e(R,{getArr:o,getGeolocate:d}),(r.latitude||i)&&e(M,{data:i,reset:n,geoData:r})]})})}k.render(e(A.StrictMode,{children:e(q,{})}),document.getElementById("root"));
